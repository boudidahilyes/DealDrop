{% extends 'baseBackOffice.html.twig' %}
{% block pagecontent %}
	<div class="flex flex-col gap-2 py-4 md:flex-row md:items-center print:hidden">
		<div class="grow">
			<h5 class="text-16">Order Overview</h5>
		</div>
		<ul class="flex items-center gap-2 text-sm font-normal shrink-0">
			<li class="relative before:content-['\ea54'] before:font-remix ltr:before:-right-1 rtl:before:-left-1  before:absolute before:text-[18px] before:-top-[3px] ltr:pr-4 rtl:pl-4 before:text-slate-400 dark:text-zink-200">
				<a href="{{path('app_orders_list')}}" class="text-slate-400 dark:text-zink-200">Orders</a>
			</li>
			<li class="text-slate-700 dark:text-zink-100">
				Order OverView
			</li>
		</ul>
	</div>
	<div class="grid grid-cols-1 2xl:grid-cols-12 gap-x-5">
		<div class="2xl:col-span-3">
			<div class="card">
				<div class="card-body">
					<div class="flex items-center justify-center bg-purple-100 rounded-md size-12 dark:bg-purple-500/20 ltr:float-right rtl:float-left">
						<i data-lucide="truck" class="text-purple-500 fill-purple-200 dark:fill-purple-500/30"></i>
					</div>
					<h6 class="mb-4 text-15">Shipping Details</h6>

					<h6 class="mb-1">{{order.member.firstName}}
						{{order.member.lastName}}</h6>
					<p class="mb-1 text-slate-500 dark:text-zink-200">{{order.deliveryAdress}}</p>
				</div>
			</div>
		</div>
		<!--end col-->
		<div class="2xl:col-span-3">
			<div class="card">
				<div class="card-body">
					<div class="bg-yellow-100 rounded-md size-12 ltr:float-right rtl:float-left dark:bg-yellow-500/20">
						<img src="/assets/images/avatar-4.png" alt="" class="h-12 rounded-md">
					</div>
					<h6 class="mb-4 text-15">Customer Info</h6>

					<h6 class="mb-1">{{order.member.firstName}}
						{{order.member.lastName}}</h6>
					<p class="mb-1 text-slate-500 dark:text-zink-200">{{order.member.email}}</p>
					<p class="text-slate-500 dark:text-zink-200">+(216)
						{{order.member.phone}}</p>
				</div>
			</div>
		</div>
		<!--end col-->
	</div>
	<!--end grid-->
	<div class="grid grid-cols-1 2xl:grid-cols-12 gap-x-5">
		<div class="2xl:col-span-9">
			<div class="grid grid-cols-1 2xl:grid-cols-5 gap-x-5">
				<div>
					<div class="card">
						<div class="text-center card-body">
							<h6 class="mb-1 underline">MGX{{order.id}}N</h6>
							<p class="uppercase text-slate-500 dark:text-zink-200">Order ID</p>
						</div>
					</div>
				</div>
				<!--end col-->
				<div>
					<div class="card">
						<div class="text-center card-body">
							<h6 class="mb-1">{{order.orderDate|date('j M, Y')}}</h6>
							<p class="uppercase text-slate-500 dark:text-zink-200">Order Date</p>
						</div>
					</div>
				</div>
				<!--end col-->
				<div>
					<div class="card">
						<div class="text-center card-body">
							{% if order.products.whoIAm() == 'ProductForSale' %}
								<h6 class="mb-1">{{order.products.price}}
									Dt</h6>
							{% endif %}
							{% if order.products.whoIAm() == 'ProductForRent' %}
								<h6 class="mb-1">{{order.products.pricePerDay * order.rentDays}}
									Dt
								</h6>
							{% endif %}
							{% if order.products.whoIAm() == 'ProductForTrade' %}
								<h6 class="mb-1">-
								</h6>
							{% endif %}
							<p class="uppercase text-slate-500 dark:text-zink-200">Order Amount</p>
						</div>
					</div>
				</div>
				<!--end col-->
								<div>
					<div class="card">
						<div class="text-center card-body">
							<span class="delivery_status px-2.5 py-0.5 text-xs inline-block font-medium rounded border bg-sky-100 border-sky-200 text-sky-500 dark:bg-sky-500/20 dark:border-sky-500/20">
								{% if order.payment == 'bank' %}
								Credit Card
								{% else %}
									Cash on Delivery
								{% endif %}
							</span>
							<p class="uppercase text-slate-500 dark:text-zink-200">Payment Method</p>
						</div>
					</div>
				</div>
				<!--end col-->
				<div>
					<div class="card">
						<div class="text-center card-body">
							<span class="delivery_status px-2.5 py-0.5 text-xs inline-block font-medium rounded border bg-yellow-100 border-yellow-200 text-yellow-500 dark:bg-yellow-500/20 dark:border-yellow-500/20">{% if delivery is not null %}
								{{delivery.state}}
						{% else %} Awaiting Pick Up{% endif %}</span>
							<p class="uppercase text-slate-500 dark:text-zink-200">Order Status</p>
						</div>
					</div>
				</div>
				<!--end col-->
			</div>
			<!--end grid-->
			<div class="card">
				<div class="card-body">
					<div class="flex items-center gap-3 mb-4">
						<h6 class="text-15 grow">Order Summary</h6>
					</div>
					<div class="overflow-x-auto">
						<table class="w-full">
							<tbody>
								<tr>
									<td class="px-3.5 py-4 border-b border-dashed first:pl-0 last:pr-0 border-slate-200 dark:border-zink-500">
										<div class="flex items-center gap-3">
											<div class="flex items-center justify-center rounded-md size-12 bg-slate-100 shrink-0">
												<img src="{{ vich_uploader_asset(order.products.productImages|first, 'imageFile') }}" alt="" class="h-8">

											</div>
											<div class="grow">
												<h6 class="mb-1 text-15">
													{% if order.products.whoIAm() == 'ProductForSale' %}
														<a href="{{path('app_product_for_sale_overview',{'id':order.products.id})}}" class="transition-all duration-300 ease-linear hover:text-custom-500">{{order.products.name}}</a>
													{% endif %}
													{% if order.products.whoIAm() == 'ProductForRent' %}
														<a href="{{path('app_product_for_rent_overview',{'id':order.products.id})}}" class="transition-all duration-300 ease-linear hover:text-custom-500">
															{{order.products.name}}</a>
														<p class="text-slate-500 dark:text-zink-200">{{order.products.pricePerDay}}
															Dt x
															{{order.rentDays}}</p>
													{% endif %}
													{% if order.products.whoIAm() == 'ProductForTrade' %}
														<a href="{{path('app_product_for_trade_overview',{'id':order.products.id})}}" class="transition-all duration-300 ease-linear hover:text-custom-500">{{order.products.name}}</a>
														{% endif %}
													</h6>
												</div>
											</div>
										</td>
									</td>
									{% if order.products.whoIAm() == 'ProductForSale' %}
										<td class="px-3.5 py-4 border-b border-dashed first:pl-0 last:pr-0 border-slate-200 dark:border-zink-500 ltr:text-right rtl:text-left">{{order.products.price}}
											Dt</td>
									{% endif %}
									{% if order.products.whoIAm() == 'ProductForRent' %}
										<td class="px-3.5 py-4 border-b border-dashed first:pl-0 last:pr-0 border-slate-200 dark:border-zink-500 ltr:text-right rtl:text-left">{{order.products.pricePerDay * order.rentDays}}
											Dt</td>
										{% endif %}
																			{% if order.products.whoIAm() == 'ProductForTrade' %}
										<td class="px-3.5 py-4 border-b border-dashed first:pl-0 last:pr-0 border-slate-200 dark:border-zink-500 ltr:text-right rtl:text-left">-</td>
										{% endif %}
									</tr>
								</tr>
								<tr>
									<td class="px-3.5 pt-4 pb-3 first:pl-0 last:pr-0 text-slate-500 dark:text-zink-200">
										Sub Total
									</td>
									{% if order.products.whoIAm() == 'ProductForSale' %}
										<td class="px-3.5 pt-4 pb-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">{{order.products.price}}
											Dt</td>
									{% endif %}
									{% if order.products.whoIAm() == 'ProductForRent' %}
										<td class="px-3.5 pt-4 pb-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">{{order.products.pricePerDay * order.rentDays}}
											Dt</td>
									{% endif %}
																		{% if order.products.whoIAm() == 'ProductForTrade' %}
										<td class="px-3.5 pt-4 pb-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">-
											</td>
									{% endif %}
								</tr>
								<tr>
									<td class="px-3.5 py-3 first:pl-0 last:pr-0 text-slate-500 dark:text-zink-200">
										Shipping Charge
									</td>
									<td class="px-3.5 py-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">8 Dt</td>
								</tr>
								<tr class="font-semibold">
									<td class="px-3.5 pt-3 first:pl-0 last:pr-0 text-slate-500 dark:text-zink-200">
										Total Amount
									</td>
									{% if order.products.whoIAm() == 'ProductForSale' %}
										<td class="px-3.5 pt-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">{{order.products.price + 8}}
											Dt</td>
									{% endif %}
									{% if order.products.whoIAm() == 'ProductForRent' %}
										<td class="px-3.5 pt-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">{{order.products.pricePerDay * order.rentDays + 8}}
											Dt</td>
									{% endif %}
																		{% if order.products.whoIAm() == 'ProductForTrade' %}
										<td class="px-3.5 pt-3 first:pl-0 last:pr-0 ltr:text-right rtl:text-left">8
											Dt</td>
									{% endif %}
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<!--end card-->

		</div>
	</div>


{% endblock %}
