{% extends 'baseBackOffice.html.twig' %}
{% block stylesheets %}<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>{% endblock %}
{% block pagecontent %}

	<div class="card mt-4">
		<div class="card-body">
			<h6 class="mb-4 text-gray-800 text-15 dark:text-white">All Deliveries</h6>
			<div id="map" style ="width:100%; height: 75vh"></div>
		</div>
	</div>
{% endblock %}
{% block endbodyjs %}
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
var map = L.map('map').setView([{{ deliveries[0].coordinates }}], 14);
L.tileLayer('https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png', {attribution: 'Â© OpenStreetMap contributors'}).addTo(map);

var markerGroup = L.featureGroup().addTo(map);
let allLocations = [{% for delivery in deliveries %}
	[{{delivery.coordinates}}],
{% endfor %}]
allLocations.forEach((location)=>{
	L.marker(location).addTo(markerGroup);
})

})
</script>
{% endblock %}
