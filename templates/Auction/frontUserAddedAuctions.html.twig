{% extends 'baseFrontOffice.html.twig' %}

{% block title %}My Auctions
{% endblock %}

{% block body %}
	<div class="page-heading py-6 md:py-12">
		<div class="container">
			<div class="mb-2 flex items-baseline gap-x-3 lg:gap-x-4.5">
				<svg role="img" class="aspect-[6/9] w-3 fill-accent sm:w-4 md:w-5 lg:w-7 xl:w-9">
					<use xlink:href="/build/images/str1/sprite.svg#arrow-right-pixel"></use>
				</svg>
				<h1 class="relative mb-3 text-3xl font-bold leading-none tracking-tighter text-gray-900 dark:text-white sm:text-4xl md:text-5xl lg:text-7xl xl:text-[84px]">
					Auctions</h1>
			</div>
			<ol class="relative flex flex-wrap gap-x-6 text-sm leading-none text-gray-500 lg:gap-x-8 lg:text-lg [&>li>a]:text-gray-900 hover:[&>li>a]:text-accent dark:[&>li>a]:text-white dark:hover:[&>li>a]:text-accent [&>li]:relative">
				<li class="font-bold">
					<a href="{{ path('app_home') }}">Home</a>
					<svg role="img" class="fill-gray absolute -right-4 top-1/2 aspect-[3/5] w-1.5 -translate-y-1/2 lg:-right-5">
						<use xlink:href="/build/images/str1/sprite.svg#arrow-right-pixel-alt"></use>
					</svg>
				</li>
				<li class="font-bold">
					<a href="#!">Account</a>
					<svg role="img" class="fill-gray absolute -right-4 top-1/2 aspect-[3/5] w-1.5 -translate-y-1/2 lg:-right-5">
						<use xlink:href="/build/images/str1/sprite.svg#arrow-right-pixel-alt"></use>
					</svg>
				</li>
				<li>Auctions</li>
			</ol>
		</div>
	</div>
	<div class="pt-10 pb-16 lg:pt-20 lg:pb-44">
		<div class="container">
		<nav class="mb-8 sm:mb-10 md:mb-12 lg:mb-16 xl:mb-20">
					<ul class="flex flex-col flex-wrap sm:flex-row gap-y-4 font-bold md:text-lg gap-x-8">
						<li>
							<a class="transition-all text-gray-900 hover:text-accent dark:text-white dark:hover:text-accent" href="{{path('app_profile')}}">Personal Info</a>
						</li>
												<li>
							<a class="transition-all text-accent" href="{{path('app_front_user_added_auctions')}}">Auctions</a>
						</li>
						<li>
							<a class="transition-all text-gray-900 hover:text-accent dark:text-white dark:hover:text-accent" href="{{path('app_product_for_sale_profil')}}">Products For Sale</a>
						</li>
						<li>
							<a class="transition-all text-gray-900 hover:text-accent dark:text-white dark:hover:text-accent" href="{{path('app_product_for_rent_profil')}}">Products for Rent</a>
						</li>
						<li>
							<a class="transition-all text-gray-900 hover:text-accent dark:text-white dark:hover:text-accent" href="{{path('app_product_for_trade_profil')}}">Products for Trade</a>
						</li>
						<li>
							<a class="transition-all text-gray-900 hover:text-accent dark:text-white dark:hover:text-accent" href="{{path('app_product_for_sale_orders')}}">Orders</a>
						</li>
					</ul>
				</nav>
			<section class="mb-20 lg:mb-32">
				<div class="mb-10 md:mb-12 lg:mb-16 xl:mb-20">
					<div class="grid grid-cols-[70px_1fr] grid-rows-2 lg:grid-rows-1 lg:auto-rows-auto lg:grid-cols-[70px_1fr_180px] gap-x-4 lg:gap-x-6 xl:gap-x-7.5 gap-y-6">

						<div class="col-span-full lg:col-auto">
							<a href="{{ path('app_auction') }}" class="inline-flex text-center font-bold leading-none transition-colors uppercase justify-center gap-x-3 py-4 px-4 md:py-[18px] lg:px-8 text-sm text-gray-500/40 ring-1 ring-inset ring-gray-500/40 bg-transparent hover:bg-accent hover:text-gray-900 hover:ring-0 w-full">Add Auction</a>
						</div>
					</div>
				</div>
				<div class="grid gap-y-7.5 grid-cols-12 sm:gap-x-7.5">
					{% for auction in auctions %}
						<div class="col-span-full sm:col-span-6 md:col-span-4 lg:col-span-3">
							<figure class="group relative mb-5.5 overflow-hidden bg-gray-100">
								<img class="aspect-[27/34] w-full object-cover transition-transform duration-300 group-hover:scale-110" src="{{ vich_uploader_asset(auction.productImages.first(), 'imageFile') }}" alt="Product Image">

								{% if auction.status == 'Pending' or auction.status == 'Declined' %}
									<div class="vv-sale-label absolute left-0 top-0 bg-accent font-bold uppercase text-base text-gray-900 w-28 h-[96px] pl-3 pt-2 leading-normal">
										{{ auction.status | capitalize }}
									</div>
								{% elseif auction.status == 'Approved' %}
									{% set now = "now"|date('U') %}
									{% set startDate = auction.startDate|date('U') %}
									{% set endDate = auction.endDate|date('U') %}

									{% if now < endDate %}
										{# Auction is still ongoing, display remaining days #}
										{% set diff = endDate - now %}
										{% set daysLeft = diff / (24 * 3600) %}
										<div class="vv-sale-label absolute left-0 top-0 bg-green font-bold uppercase text-base text-gray-900 w-28 h-[96px] pl-3 pt-2 leading-normal">
											{{ daysLeft | round }}
											day{{ daysLeft > 1 ? 's' : '' }}
											Left
										</div>
									{% else %}
										{# Auction has ended, display "DONE" #}
										<div class="vv-sale-label absolute left-0 top-0 bg-green font-bold uppercase text-base text-gray-900 w-28 h-[96px] pl-3 pt-2 leading-normal">
											DONE
										</div>
									{% endif %}
								{% endif %}


								<div class="absolute inset-0 bg-white dark:bg-gray-900 opacity-0 group-hover:opacity-90 transition-opacity"></div>
								<div class="flex absolute justify-center left-0 right-0 top-1/2 -translate-y-1/2 scale-90 [@media(hover:hover)]:opacity-0 [@media(hover:hover)]:transition-all [@media(hover:hover)]:duration-300 [@media(hover:hover)]:group-hover:scale-100 [@media(hover:hover)]:group-hover:opacity-100">
									<a href="{{ path('app_front_single_auction', {'id': auction.id}) }}" class="inline-flex text-center font-bold leading-none transition-colors uppercase justify-center gap-x-3 py-4 px-4 md:py-[18px] lg:px-8 text-sm text-gray-900 bg-accent hover:bg-accent/90">More Details</a>
								</div>
							</figure>

							<div>
								<h3 class="mb-1 font-bold leading-tight text-lg text-gray-900 dark:text-white">
									<a class="text-gray-900 transition-colors hover:text-accent dark:text-white dark:hover:text-accent" href="_str1-single-product.html">{{auction.name}}</a>
								</h3>
								<div class="flex mb-2 font-medium gap-2 text-gray leading-snug dark:text-gray">
									<div class="min-w-0">
										<ul class="flex flex-col gap-y-1.5 text-sm leading-none font-medium">
											<li>Start date:
												{{auction.startDate|date('Y-m-d H:i:s')}}</li>
											<li>End Date:
												{{auction.endDate|date('Y-m-d H:i:s')}}</li>
											<li class="text-accent">Owner Name:
												{{auction.member.firstName|capitalize}}
												{{auction.member.lastName|capitalize}}</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
				<div class="flex items-center justify-center mt-10 md:mt-20 lg:mt-28">
					<div class="vv-preloader-spikes-roll relative h-10 w-16 animate-spike-roll bg-spike-roll bg-no-repeat"></div>
				</div>
			</section>
		</div>
	</div>
{% endblock %}
